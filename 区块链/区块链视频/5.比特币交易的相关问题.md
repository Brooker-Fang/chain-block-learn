## 比特币网络
由一个若干节点组成的用以广播交易信息和数据区块的P2P网络

## 交易（比特币转账）
+ 交易就是把比特币从一个地址转到另一个地址，更准确的说，一笔 交易 值一个经过签名运算的，表达价值转移的数据结构
+ 比特币交易本质上是在传递比特币所有权，这就是价值传递
+ 每一笔 交易 都是经过比特币网络传输，由矿工节点收集并打包进区块中，永久保存在区块链中
+ 比特币转账交易通过比特币交易平台、比特币地址、比特币客户端操作

## 非对称加密
+ 公开密钥加密，也称非对称加密，是密码学的一种算法
+ 非对称加密，就是加密和解密需要两把钥匙，一把公钥和私钥
+ 公钥和私钥两把钥匙中，如果一个用作加密，则另一个就用作解密，使用其中一个密钥把明文加密后所得的密文，只能用另一个密钥才能解密
+ 比特币保证支付可靠性原理就是非对称加密
  + 别人用你的公钥加密一笔钱发送给你，你用私钥解密后收到钱，而别人没有私钥就没有办法收到钱
  + 你用私钥做了一个数值钱吗，别人用你的公钥能验证该签名是否属于你
  + 由于支付的钱必须通过私钥才能使用，所以你是谁并不重要，重要的是谁拥有私钥，只有拥有私钥，才能取出支付给你的钱
  + 事实上，私钥保证的不是取出支付给你的钱，而是保证只有你能把这些属于你的钱支付出去

## 比特币钱包
+ 比特币钱包指 保存比特币地址和私钥的软件，可以用它来接收、发送、存储你的比特币
+ 换句话说前欧巴就是私钥，比特币地址和区块链数据的管理工具。比特币钱包的核心功能就是保护私钥，如私钥丢失，将永远事情这笔比特币
+ 比特币地址有点像银行卡号，私钥类似银行卡密码，钱包可以存放多张银行卡，比特币钱包可以存储多个比特币地址以及每个地址对应的唯一私钥
+ 大多数比特币钱包为了方便，大多是将私钥、公钥以密码对的形式存储在一起，但是公钥可以由私钥计算出，所以只存私钥也是可以的
+ 比特币钱包有多种形态：PC钱包、手机钱包、在线网页钱包、纸钱包

## 私钥、公钥和比特币地址之间的关系
私钥可以推导出公钥，在通过公钥推导出比特币地址。并且不能反向推导

## 数字签名
+ 只有转账的人才能生成一段方伪造的字符串，通过验证该字符串，一方面证明该交易是转出方本人发起的，另一方面证明交易信息在传输过程中没有被更改
+ 数字签名由 数字摘要和非对称加密技术组成
  + 数字摘要把交易信息hash成固定长度的字符串
  + 在用私钥对hash后的交易信息进行加密形成数字签名
+ 交易中，需要将完整的交易信息和数字签名一起广播给矿工
  + 矿工节点用转账人公钥对签名验证，验证成功说明该交易确实是转账人发起的
  + 矿工节点将交易信息进行hash后与签名找那个的交易信息摘要进行比对，如果一致，则说明加以信息在传输过程中没有被篡改
+ 比特币系统主要用了ECDSA，也就是椭圆曲线签名算法

## 发出交易到矿工打包需要几步
+ 发起比特币转账，将交易广播到全网
+ 挖矿节点接到交易后先将其放入本地内存池，进行一些基本验证，判断是否属于UTXO，如果通过验证，则将该笔交易放入未确认交易池，等待被打包，如果未通过验证，则被认为是无效交易，不会 被打包
  + 未确认交易池是所有交易数据的集合，这些交易已经被比特币节点验证，但未被确认
+ 挖矿节点在比拼算力的同时，还需要及时验证每笔交易，更新自己的 未确认交易池，矿工挖矿前，将从 未确认交易池 中抽取未确认交易 进行打包
+ 有时交易不能被及时打包，是因为 未确认交易池 中交易太多，每个区块能记录的交易数有限，就造成区块拥堵

## 比特币交易验证过程
+ 一笔交易就是一个地址的比特币，转移到另一个地址，由于比特币的交易记录全部都是公开的，那个地址拥有多少比特币，都是可以查到的，因此，支付方是否拥有足够的比特币，完成这笔交易，这是可以轻易验证的，问题出在怎么防止其他人，冒用你的名义申报交易
+ 比特币协议规定，申报交易的时候，处理交易金额，转出比特币的一方还必须题以下数据
  + 上一笔交易的Hash
  + 本次交易双方的地址
  + 支付方的公钥
  + 支付方的私钥生成的数字签名
+ 验证这笔交易是否属实，需要三步
  + 找到上一笔交易，确认支付方的比特币来源
  + 算出支付方公钥的指纹，确认与支付方的地址一致，从而保证公钥属实
  + 使用公钥去解开数字签名，保证签名属实，私钥属实
  + 经过以上三步，就可以认定这笔交易是真实的

## 比特币交易的找零机制
## 双重支付
双重支付是成功支付了1次以上的勤快，比特币通过对添加到区块中的每笔交易进行验证来防止双重支付，确保交易的输入没有被支付过